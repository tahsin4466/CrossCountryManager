{% extends 'layout.html'%}
{% block body %}

<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load("current", {packages:['corechart']});
    google.charts.setOnLoadCallback(drawChart);
    function drawChart() {
      var data = google.visualization.arrayToDataTable([
        ["House", "Points", { role: "style" } ],
        ["Browning", {{housepoints[0]}}, "yellow"],
        ["Hoog", {{housepoints[1]}}, "blue"],
        ["Morris", {{housepoints[2]}}, "green"],
        ["Noble", {{housepoints[3]}}, "red"]
      ]);

      var view = new google.visualization.DataView(data);
      view.setColumns([0, 1,
                       { calc: "stringify",
                         sourceColumn: 1,
                         type: "string",
                         role: "annotation" },
                       2]);

      var options = {
        title: "Total House Points",
        fontName: 'Sans-serif',
        width: 600,
        legendTextStyle: { color: '{{ textcolour|safe }}' },
        titleTextStyle: { color: '{{ textcolour| safe }}' },
        hAxis: {
    textStyle:{color: '{{ textcolour|safe }}'}},
        height: 400,
        chartArea: {
    backgroundColor: {
        stroke: '{{ textcolour|safe }}',
        strokeWidth: 3
    }
},
        backgroundColor: { fill:'transparent' },
        bar: {groupWidth: "100%"},
        legend: { position: "none" },
        animation: {
          duration: 1500,
          easing: 'out',
          startup: true
      }
      };
      var chart = new google.visualization.ColumnChart(document.getElementById("chart1"));
      chart.draw(view, options);
  }
  </script>

</head>
<style>
    .HousePoints {
        font-size: 1.5em;  
        border: 4px solid {{ textcolour|safe }};
    }
    .EventList {
        font-size: 1.4em;
        line-height: 2em;
    }
    .PositionTable {
        font-size: 1.25em;
    }
    
    .RunningTable {
        border: 2px solid {{ textcolour|safe }};
    }
    .Content {
  -webkit-background-size: cover;
  -moz-background-size: cover;
  background-size: cover;
  -o-background-size: cover;
font-family:Sans-serif;
background-image: linear-gradient(90deg, rgba(110,110,110,1) 0%, rgba(82,82,82,1) 26%, rgba(61,61,61,1) 55%, rgba(41,41,41,1) 78%, rgba(0,0,0,1) 100%);

 /* background: rgb(207,207,207); */
/* background: linear-gradient(90deg, rgba(207,207,207,1) 0%, rgba(237,237,237,1) 38%, rgba(255,255,255,1) 100%); */

}

.fullscreen-bg {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  overflow: hidden;
  z-index: -100;
}

.fullscreen-bg__video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

@media (min-aspect-ratio: 16/9) {
  .fullscreen-bg__video {
    height: 300%;
    top: -100%;
  }
}

@media (max-aspect-ratio: 16/9) {
  .fullscreen-bg__video {
    width: 300%;
    left: -100%;
  }
}

body {
    color: {{ textcolour|safe }};
}

@media (max-width: 767px) {
  .fullscreen-bg {
    background: url('../img/videoframe.jpg') center center / cover no-repeat;
  }

  .fullscreen-bg__video {
    display: none;
  }
}

@media print{
    #print {
        display: none;
    }
}

</style>
<body>
    <div class="fullscreen-bg" id="print">
        <video loop muted autoplay class="fullscreen-bg__video">
            <source src='{{bgurl}}' type='video/mp4'>
    </div>
    <div class="container" id="Content">
        <div class="card border-0 shadow my-5" style="border-radius: 25px;">
         <div class="card-body p-5" style="border-radius: 25px; background-image: {{ gradient|safe }}">

            <h1 id="print"><b><u>Sports Centre</u> <img style = "width:1.54em;height:1.75em" src="https://www.stlukes.qld.edu.au/app/images/logo.png"></b></h1>
    
    <div id="print"><h4><b>Toggle Page:     
    <a href="#Points" class="btn btn-{{ button|safe }}" data-toggle="collapse"><b>Points üèÜ</b></a>
    <a href="#Events" class="btn btn-{{ button|safe }}" data-toggle="collapse"><b>Events üèÅ</b></a>
    <a href="#Positions" class="btn btn-{{ button|safe }}" data-toggle="collapse"><b>Positions ü•á</b></a>
    <a href="#Runners" class="btn btn-{{ button|safe }}" data-toggle="collapse"><b>Runners üèÉ</b></a>
    </b></h4>

    <h4><b>Functions:
    {{ printtogle|safe }}
    <a href="" class="btn btn-{{ button|safe }}"><b>Student Logger üìù</b></a>
    <a href="{{url_for('theme')}}" class="btn btn-{{ button|safe }}"><b>{{btntext}}</b></a>
    <a href="{{url_for('logout')}}" class="btn btn-{{ button|safe }}"><b>Logout üö™</b></a></b></h4></div>

    <br>
    
<div id="Points" class="collapse-show">
        <h2><b><u>Points</u> üèÜ</b></h2>
<table>
    <thead>
    </thead>
    <tbody>
        <tr>
        <td><b><div id='chart1'></div></b><h4><b>Current Winner: {{housewinner}}</b></h4></td>
        <td><div style="float:center">
            <table class="HousePoints">
            <thead>
                <th><u>House</u></th>
                <th><u>Points</u></th>
                <th> </th>
            </thead>
            <tbody>
              <tr>
                <td>Browning</td>
                <td>{{housepoints[0]}}</td>
                <td><a href="#{{housenames[0]}}" data-toggle="collapse"><b>Change</b></a></td>
              </tr>
              <tr>
                 <td>Hoog</td>
                 <td>{{housepoints[1]}}</td>
                 <td><a href="#{{housenames[1]}}" data-toggle="collapse"><b>Change</b></a></td>
               </tr>
               <tr>
                 <td>Morris</td>
                 <td>{{housepoints[2]}}</td>
                 <td><a href="#{{housenames[2]}}" data-toggle="collapse"><b>Change</b></a></td>
               </tr>
               <tr>
                 <td>Noble</td>
                 <td>{{housepoints[3]}}</td>
                 <td><a href="#{{housenames[3]}}" data-toggle="collapse"><b>Change</b></a></td>
               </tr>
             </tbody>
         </table>
         </div>
         <br>
        {% for item in housenames %}
        <div id="print">
        <div id="{{item}}" class="collapse">
           <form action='/PointUpdate' method="POST">
               <div class="form-group">
                   <label for="points"><b>Change Points for {{item}} House</b></label>
                   <input class ="form-control" type="hidden" id="house" name="house" value="{{item}}">
                   <input class ="form-control" type="text" id="points" name="points">
                   <br>
                   <button class = "btn btn-{{ button|safe }}" type="insert">Enter</button>
                   </div>
           </form>
           <br>
       </div>
       {% endfor %}
       </div>
         </td>
        </tr>
        </tbody>
</table>
</div>
  
<br>

<div id="Events" class="collapse">
<table>
    <thead>
    </thead>
    <tbody>
        <td>
            <h2><b><u>Events</u> üèÅ</b></h2>
            <ul class="EventList">
                {% for item in eventdb %}
                <li>{{item[1]}} - {{item[2]}}m <a href="#event{{item[0]}}" data-toggle="collapse"><b>Change</b></a><a> / </a><a href="{{url_for('delete', id=item[0])}}" style="color: red"><b>Delete</b></a></li>
                {% endfor %}
            </ul>
            <a href="#EventEntry" class="btn btn-{{ button|safe }}" data-toggle="collapse" id="print">New Event</a>
            <br>
            <br>
            </td>
        <td>
            <div id="print">
            <div id="EventEntry" class="collapse">
            <form action='/NewEvent' method="POST">
                <div class="form-group">
                    <label for="neweventname"><b>New Event Name</b></label>
                    <input class ="form-control" type="text" id="neweventname" name="neweventname">
                    <br>
                    <label for="neweventlength"><b>New Event Length (m)</b></label>
                    <input class ="form-control" type="text" id="neweventlength" name="neweventlength">
                    <br>
                    <button class = "btn btn-{{ button|safe }}" type="insert">Enter</button>
                </div>
            </form>
            </div>
            </div>
            
            <div id="print">
            {% for item in eventdb %}
        <div id="event{{item[0]}}" class="collapse">
           <form action='/EventUpdate' method="POST">
               <div class="form-group">
                <label for="eventname"><b>Updated Name for {{item[1]}}</b></label>
                    <input class ="form-control" type="text" id="eventname" name="eventname">
                    <br>
                    <label for="eventlength"><b>Updated Event Length (m)</b></label>
                    <input class ="form-control" type="text" id="eventlength" name="eventlength">
                    <input class ="form-control" type="hidden" id="eventid" name="eventid" value="{{item[0]}}">
                    <br>
                    <br>
                   <button class = "btn btn-{{ button|safe }}" type="insert">Enter</button>
                   </div>
           </form>
           <br>
       </div>
       {% endfor %}
       </div>
        </td>
    </tbody>
    </table>
    </div>

    <br>
    
    <div id="Positions" class="collapse">
        <h2><b><u>Positions</u> ü•á</b></h2>
        <div id="print">
        <form>
            <div class="form-group">
                <label for="itemsearch"><b>Runner Positions for:</b></label>
                    <fieldset>
                          <select id = "itemsearch" name="itemsearch" class="form-control">
                          {% for item in eventdb %}
                            <option>{{item[1]}}</option>
                            {% endfor %}
                          </select>
                        </fieldset>
                        <br>
                        <button class = "btn btn-{{ button|safe }}" type="insert">Compile</button>
                    </div>
        </form>
        </div>
    <div id="Table" class="collapse">   
   <table class="PositionTable">
        <thead>
            <tr>
                <th>Position</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
                <th>Time</th>
                <th>Points</th>
                <th> </th>
                <th> </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>John</td>
                <td>Doe</td>
                <td>11111111@slasmail.com</td>
                <td>22:33</td>
                <td>10</td>
                <td><a href="#RunnerUpdate" data-toggle="collapse"><b>Modify</b></a></td>
                <td><a href="" style="color:red"><b>Delete</b></a></td>
            </tr>
            <tr>
                <td>2</td>
                <td>Jane</td>
                <td>Doe</td>
                <td>22222222@slasmail.com</td>
                <td>33:22</td>
                <td>9</td>
                <td><a href="#RunnerUpdate" data-toggle="collapse"><b>Modify</b></a></td>
                <td><a href="" style="color:red"><b>Delete</b></a></td>
            </tr>
        </tbody>
   </table>
</div>
<br>
<a href="#Table" class="btn btn-{{ button|safe }}" data-toggle="collapse" id="print">Show Table</a>
</div>
<br>
<br>
<div id="print">
<div id="RunnerUpdate" class="collapse">
    <h5><b>Modify for Position x</b></h5>
    <form>
        <div class="form-group">
            <label for="ordername"><b>New Student Number</b></label>
            <input class ="form-control" type="text" id="ordername" name="ordername">
            <label for="ordername"><b>New Time</b></label>
            <input class ="form-control" type="text" id="ordername" name="ordername">
            <br>
            <button class = "btn btn-{{ button|safe }}" type="insert">Enter</button>
        </div>
    </form>
</div>
    </div>

    <br>

    <div id="Runners" class="collapse">
        <h2><b><u>Runners</u> üèÉ</b></h2>
        <div id="print">
        <form action = "http://localhost:5000/upload" method = "POST" enctype = "multipart/form-data">
            <div class="form-group">
        <label for="studentface"><b>Search Runners by Student Photo</b></label>
        <br>
        <input type = "file" name = "File" />
        <br>
        <br>
        <button class="btn btn-{{ button|safe }}" data-target="#PhotoProcess" data-toggle="collapse" data-type = "submit">Search Runner</button>
         </div>
      </form>
      <br>
      <div id="PhotoProcess" class="collapse">
        <h4><b>Identifying Student. Please wait...</b></h4><br></div>
        <a href="#RunnerView" data-toggle="collapse" class = "btn btn-{{ button|safe }}">Show Runner Info</a>
        <br>
        </div>
        <div id="RunnerView" class="collapse" style="float:center">
            <table>
                <thead></thead>
                <tbody>
                    <tr>
                        <td> 
                            <div style="float:center">
                            <h3><b>Runner Info</b></h3>
                            <h5><b>First Name:</b> {{runnerfirst}}</h5>
                            <h5><b>Last Name:</b> {{runnerlast}}</h5>
                            <h5><b>Age:</b> {{runnerage}}</h5>
                            <h5><b>Gender:</b> {{runnergender}}</h5>
                            <h5><b>House:</b> {{runnerhouse}}</h5>
                            <h5><b>ID: {{runnerid}}</b></h5>
                            </div> 
                        </td>
                        <td><img src="{{imagename}}" style="border: 5px solid black; float:center; width:12.8em;height:19.2em"></td>
                    </tr>
                </tbody>
            </table>
        </div>
<br>
<button  class="btn btn-{{ button|safe }}" href="#AllRunners" data-toggle="collapse">Show All Runners</button>
        <br>
<br>
<div id="AllRunners" class="collapse">
    <h3><b>All Runners</b></h3>
    <h5><b>Press F3 in your browser to search the student table</b></h5>
    <table class="RunningTable">
        <thead>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Age</th>
            <th>Gender</th>
            <th>House</th>
            <th>Number</th>
        </thead>
        <tbody>
        {% for item in runnerdb %}
            <tr>
                <td>{{item[0]}}</td>
                <td>{{item[1]}}</td>
                <td>{{item[2]}}</td>
                <td>{{item[3]}}</td>
                <td>{{item[4]}}</td>
                <td>{{item[5]}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <br>
</div>
    </div>
    <div id="print">
    <img src="https://d1.awsstatic.com/customer-references-case-studies-logos/StLukesAnglicanSchool_Customer-Reference_Logo%402x.40aabd4202ec94a949d3ca566e97d2c40705735c.png"
    <br><h6><b></h6>Web Application By Tahsin Ahmed</b></h6></div>
    </div>
    </div>
    </div>
  </body>

{% endblock %}